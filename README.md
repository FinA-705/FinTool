# FinancialAgent - æ™ºèƒ½é€‰è‚¡ç³»ç»Ÿ

ä¸€ä¸ªåŸºäºæ–½æ´›æ–¯ä»·å€¼æŠ•èµ„ç­–ç•¥çš„è·¨å¸‚åœºæ™ºèƒ½é€‰è‚¡ç³»ç»Ÿï¼Œæ”¯æŒAè‚¡ã€ç¾è‚¡ã€æ¸¯è‚¡çš„å¤šæ•°æ®æºåˆ†æã€AIè¯„åˆ†ã€å›æµ‹å’Œè‡ªåŠ¨è°ƒä¼˜ã€‚

## é¡¹ç›®ç‰¹æ€§

### ğŸŒ è·¨å¸‚åœºæ”¯æŒ
- **Aè‚¡å¸‚åœº**ï¼šæ²ªæ·±ä¸»æ¿ã€åˆ›ä¸šæ¿ã€ç§‘åˆ›æ¿
- **ç¾è‚¡å¸‚åœº**ï¼šçº³æ–¯è¾¾å…‹ã€çº½äº¤æ‰€
- **æ¸¯è‚¡å¸‚åœº**ï¼šä¸»æ¿ã€åˆ›ä¸šæ¿

### ğŸ“Š å¤šæ•°æ®æºé›†æˆ
- **Tushare**ï¼šAè‚¡ä¸“ä¸šæ•°æ®
- **Yahoo Finance**ï¼šå…¨çƒå¸‚åœºæ•°æ®
- **AKShare**ï¼šå¤šå¸‚åœºé‡‘èæ•°æ®
- **è‡ªå®šä¹‰é€‚é…å™¨**ï¼šæ”¯æŒæ‰©å±•æ›´å¤šæ•°æ®æº

### ğŸ¯ æ–½æ´›æ–¯ä»·å€¼æŠ•èµ„ç­–ç•¥
- ä½P/Eã€P/Bæ¯”ç‡ç­›é€‰
- å€ºåŠ¡æ¯”ç‡æ§åˆ¶
- ç›ˆåˆ©ç¨³å®šæ€§åˆ†æ
- åˆ†çº¢å†å²è¯„ä¼°
- æ”¯æŒè‡ªå®šä¹‰ç­–ç•¥è¡¨è¾¾å¼

### ğŸ¤– æ™ºèƒ½è¯„åˆ†ç³»ç»Ÿ
- **åŸºç¡€è¯„åˆ†**ï¼šè´¢åŠ¡æŒ‡æ ‡é‡åŒ–è¯„åˆ†
- **AIè¯„åˆ†**ï¼šGPT-4ç­‰å¤§æ¨¡å‹æ·±åº¦åˆ†æ
- **é£é™©è¯„ä¼°**ï¼šæ³¢åŠ¨ç‡ã€æœ€å¤§å›æ’¤ã€VaRè®¡ç®—
- **ç»¼åˆè¯„åˆ†**ï¼šå¤šç»´åº¦æƒé‡è¯„åˆ†

### ğŸ“ˆ å›æµ‹ä¸ä¼˜åŒ–
- å†å²æ•°æ®å›æµ‹å¼•æ“
- å¤šç­–ç•¥å¯¹æ¯”åˆ†æ
- ç»©æ•ˆæŒ‡æ ‡è®¡ç®—
- å‚æ•°è‡ªåŠ¨è°ƒä¼˜ï¼ˆé—ä¼ ç®—æ³•ã€è´å¶æ–¯ä¼˜åŒ–ï¼‰

### ğŸ”§ ç³»ç»Ÿç‰¹æ€§
- æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•
- å¼‚æ­¥æ•°æ®è·å–ï¼Œé«˜æ€§èƒ½
- æ™ºèƒ½ç¼“å­˜æœºåˆ¶
- é…ç½®çƒ­åŠ è½½
- RESTful APIæ¥å£
- Webç•Œé¢ç®¡ç†

## é¡¹ç›®ç»“æ„

```
FinancialAgent/
â”œâ”€â”€ adapters/           # æ•°æ®æºé€‚é…å™¨
â”‚   â”œâ”€â”€ base.py        # é€‚é…å™¨åŸºç±»
â”‚   â”œâ”€â”€ tushare_adapter.py
â”‚   â”œâ”€â”€ yfinance_adapter.py
â”‚   â””â”€â”€ akshare_adapter.py
â”œâ”€â”€ cleaner/           # æ•°æ®æ¸…æ´—æ¨¡å—
â”‚   â””â”€â”€ cleaner.py
â”œâ”€â”€ strategies/        # æŠ•èµ„ç­–ç•¥æ¨¡å—
â”‚   â”œâ”€â”€ schloss_strategy.py
â”‚   â””â”€â”€ formula_parser.py
â”œâ”€â”€ scorer/           # è¯„åˆ†æ¨¡å—
â”‚   â”œâ”€â”€ basic_scorer.py
â”‚   â”œâ”€â”€ ai_scorer.py
â”‚   â””â”€â”€ risk_assessor.py
â”œâ”€â”€ core/            # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ config_manager.py
â”‚   â”œâ”€â”€ cache_manager.py
â”‚   â”œâ”€â”€ output_formatter.py
â”‚   â””â”€â”€ scheduler.py
â”œâ”€â”€ backtest/        # å›æµ‹æ¨¡å—
â”‚   â”œâ”€â”€ backtester.py
â”‚   â””â”€â”€ performance_metrics.py
â”œâ”€â”€ utils/           # å·¥å…·åº“
â”‚   â”œâ”€â”€ logger.py
â”‚   â”œâ”€â”€ timer.py
â”‚   â”œâ”€â”€ validators.py
â”‚   â””â”€â”€ ...
â”œâ”€â”€ webapp/          # Webåº”ç”¨
â”‚   â”œâ”€â”€ app.py
â”‚   â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ static/
â”‚   â””â”€â”€ templates/
â”œâ”€â”€ tests/           # æµ‹è¯•ç”¨ä¾‹
â”œâ”€â”€ config/          # é…ç½®æ–‡ä»¶
â”œâ”€â”€ data/            # æ•°æ®å­˜å‚¨
â”œâ”€â”€ logs/            # æ—¥å¿—æ–‡ä»¶
â””â”€â”€ cli.py           # å‘½ä»¤è¡Œå…¥å£
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd FinancialAgent

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# or
venv\Scripts\activate     # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### é…ç½®è®¾ç½®

1. å¤åˆ¶é…ç½®æ¨¡æ¿ï¼š
```bash
cp config/config.example.yaml config/config.yaml
```

2. ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œè®¾ç½®APIå¯†é’¥ï¼š
```yaml
data_sources:
  tushare:
    token: "your_tushare_token"
  # ... å…¶ä»–é…ç½®
```

### è¿è¡Œç¤ºä¾‹

```bash
# å‘½ä»¤è¡Œæ¨¡å¼
python cli.py --market Aè‚¡ --strategy schloss --output json

# WebæœåŠ¡æ¨¡å¼
python webapp/app.py

# å›æµ‹æ¨¡å¼
python cli.py --backtest --start-date 2020-01-01 --end-date 2023-12-31
```

## APIæ–‡æ¡£

### å‘½ä»¤è¡Œæ¥å£

```bash
# åŸºæœ¬é€‰è‚¡
python cli.py --market Aè‚¡ --strategy schloss

# è‡ªå®šä¹‰ç­–ç•¥
python cli.py --formula "PE < 15 AND PB < 2 AND ROE > 0.1"

# è¾“å‡ºæ ¼å¼
python cli.py --output json --pretty --save results.json

# å›æµ‹åˆ†æ
python cli.py --backtest --period 1y --benchmark 000300.SH
```

### Web API

```http
# è·å–é€‰è‚¡ç»“æœ
GET /api/stocks/screen?market=Aè‚¡&strategy=schloss

# è·å–è‚¡ç¥¨è¯„åˆ†
GET /api/stocks/{symbol}/score

# é…ç½®ç®¡ç†
GET /api/config
POST /api/config/update
```

## é…ç½®è¯´æ˜

### ç­–ç•¥é…ç½®

```yaml
strategies:
  schloss:
    pe_max: 15.0        # æœ€å¤§å¸‚ç›ˆç‡
    pb_max: 2.0         # æœ€å¤§å¸‚å‡€ç‡
    debt_ratio_max: 0.4 # æœ€å¤§è´Ÿå€ºç‡
    roe_min: 0.1        # æœ€å°å‡€èµ„äº§æ”¶ç›Šç‡
    dividend_years: 3   # åˆ†çº¢å¹´æ•°è¦æ±‚
```

### è¯„åˆ†æƒé‡

```yaml
scoring:
  weights:
    basic_score: 0.4    # åŸºç¡€è¯„åˆ†æƒé‡
    ai_score: 0.4       # AIè¯„åˆ†æƒé‡
    risk_score: 0.2     # é£é™©è¯„åˆ†æƒé‡
```

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°æ•°æ®æº

1. ç»§æ‰¿ `adapters.base.BaseAdapter`
2. å®ç°å¿…è¦çš„æ¥å£æ–¹æ³•
3. é…ç½®å­—æ®µæ˜ å°„
4. æ³¨å†Œåˆ°é…ç½®æ–‡ä»¶

### è‡ªå®šä¹‰ç­–ç•¥

1. ç»§æ‰¿ `strategies.base.BaseStrategy`
2. å®ç°é€‰è‚¡é€»è¾‘
3. æˆ–ä½¿ç”¨å…¬å¼è§£æå™¨åˆ›å»ºè¡¨è¾¾å¼ç­–ç•¥

### æ‰©å±•è¯„åˆ†æ¨¡å—

1. ç»§æ‰¿ç›¸åº”çš„è¯„åˆ†åŸºç±»
2. å®ç°è¯„åˆ†ç®—æ³•
3. æ³¨å†Œåˆ°è¯„åˆ†ç®¡é“

## æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæ¨¡å—æµ‹è¯•
pytest tests/test_adapters.py

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=. --cov-report=html
```

## æ€§èƒ½ä¼˜åŒ–

- ä½¿ç”¨å¼‚æ­¥è¯·æ±‚æé«˜æ•°æ®è·å–æ•ˆç‡
- æ™ºèƒ½ç¼“å­˜å‡å°‘é‡å¤è®¡ç®—
- æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
- åˆ†å¸ƒå¼è®¡ç®—æ”¯æŒå¤§è§„æ¨¡å›æµ‹

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›é¡¹ç›®ã€‚

## è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µï¼š[é¡¹ç›®é“¾æ¥]
- é—®é¢˜åé¦ˆï¼š[Issuesé“¾æ¥]
- æŠ€æœ¯äº¤æµï¼š[è®¨è®ºåŒºé“¾æ¥]
